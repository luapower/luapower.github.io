<!DOCTYPE html>
<html>
	<head>
		<meta charset='utf-8'>
		<title> building luapower   - building the C libraries </title>
		<script src="jquery.js"></script>
		<script src="jquery-cookie.js"></script>
		<script src="jquery-tablesorter.js"></script>
		<script src="strftime.js"></script>
		<script src="config.js"></script>
		<script src="main.js"></script>
		<link rel="stylesheet" type="text/css" href="templates/reset.css" />
		<link rel="stylesheet" type="text/css" href="templates/hack.css" />
		<link rel="stylesheet" type="text/css" id="lights_css" />
		<script>
			var DOCNAME = 'building'
			var PROJECT = ''
			//set the lights before rendering starts
			set_lights()
		</script>
	</head>
	<body>
		<header>
			<div class="container">
				<div class="btn-container btn-lights-container">
					<a href="#" class="btn btn-lights" id="lights">lights</a>
				</div>
				
				<div class="btn-container btn-home-container">
					<a href="/" class="btn btn-home">luapower</a>
				</div>
				
				<table id="header_table">
					<tr>
						<td style="vertical-align: middle;" width="100%">
							<h1> building luapower </h1>
							<h2> building the C libraries </h2>
							<span class="doc" id="package_info">&nbsp;</span>
						</td>
						<td style="vertical-align: middle;" align="right" style="height: 150px">
																											</td>
					</tr>
				</table>
															</div>
		</header>
		<div class="container">
			<div id="toc_container" class="toc_container doc"></div>
			<section class="doc">
				<span id="module_info"></span>
				<h2 id="overview">Overview</h2>
<p>Building is based on one-liner shell scripts that invoke gcc directly (no makefiles). Each package/platform has a separate script in its <code>csrc</code> dir. Stripped C sources are also included so you can start right away. Dependencies are listed in the <code>WHAT</code> file -- download/build them first.</p>
<p>For compiling Lua/C modules you also need <a href="https://github.com/luapower/lua-headers">lua-headers</a> and, for Windows in particular, lua51.dll must be available at the time of building, so you'll need <a href="luajit.html">luajit</a> too.</p>
<h3 id="on-windows">On Windows</h3>
<p>The build scripts for Windows assume that both MSys and MinGW bin dirs (in this order) are in your PATH.</p>
<p>Windows binaries were compiled with MinGW GCC 4.7.2 and linked against msvcrt.dll.</p>
<blockquote>
<p>gcc flags used throughout: <code>-O2 -s -static-libgcc</code> (level 2 optimization, stripped binary, static libc)<br />g++ flags used throughout: <code>-O2 -s -static-libstdc++</code> (level 2 optimization, stripped binary, static libstdc++)</p>
</blockquote>
<p>Below is the exact list of MinGW packages used to make a complete C/C++ toolchain.</p>
<table>
<tbody>
<tr class="odd">
<td align="left"><a href="http://sourceforge.net/projects/mingw/files/MinGW/Base/binutils/binutils-2.23.1/binutils-2.23.1-1-mingw32-bin.tar.lzma">binutils-2.23.1-1-mingw32-bin</a></td>
</tr>
<tr class="even">
<td align="left"><a href="http://sourceforge.net/projects/mingw/files/MinGW/Base/mingw-rt/mingwrt-3.20/mingwrt-3.20-2-mingw32-dev.tar.lzma">mingwrt-3.20-2-mingw32-dev</a></td>
</tr>
<tr class="odd">
<td align="left"><a href="http://sourceforge.net/projects/mingw/files/MinGW/Base/mingw-rt/mingwrt-3.20/mingwrt-3.20-2-mingw32-dll.tar.lzma">mingwrt-3.20-2-mingw32-dll</a></td>
</tr>
<tr class="even">
<td align="left"><a href="http://sourceforge.net/projects/mingw/files/MinGW/Base/w32api/w32api-3.17/w32api-3.17-2-mingw32-dev.tar.lzma">w32api-3.17-2-mingw32-dev</a></td>
</tr>
<tr class="odd">
<td align="left"><a href="http://sourceforge.net/projects/mingw/files/MinGW/Base/mpc/mpc-0.8.1-1/mpc-0.8.1-1-mingw32-dev.tar.lzma">mpc-0.8.1-1-mingw32-dev</a></td>
</tr>
<tr class="even">
<td align="left"><a href="http://sourceforge.net/projects/mingw/files/MinGW/Base/mpc/mpc-0.8.1-1/libmpc-0.8.1-1-mingw32-dll-2.tar.lzma">libmpc-0.8.1-1-mingw32-dll-2</a></td>
</tr>
<tr class="odd">
<td align="left"><a href="http://sourceforge.net/projects/mingw/files/MinGW/Base/mpfr/mpfr-2.4.1-1/mpfr-2.4.1-1-mingw32-dev.tar.lzma">mpfr-2.4.1-1-mingw32-dev</a></td>
</tr>
<tr class="even">
<td align="left"><a href="http://sourceforge.net/projects/mingw/files/MinGW/Base/mpfr/mpfr-2.4.1-1/libmpfr-2.4.1-1-mingw32-dll-1.tar.lzma">libmpfr-2.4.1-1-mingw32-dll-1</a></td>
</tr>
<tr class="odd">
<td align="left"><a href="http://sourceforge.net/projects/mingw/files/MinGW/Base/gmp/gmp-5.0.1-1/gmp-5.0.1-1-mingw32-dev.tar.lzma">gmp-5.0.1-1-mingw32-dev</a></td>
</tr>
<tr class="even">
<td align="left"><a href="http://sourceforge.net/projects/mingw/files/MinGW/Base/gmp/gmp-5.0.1-1/libgmp-5.0.1-1-mingw32-dll-10.tar.lzma">libgmp-5.0.1-1-mingw32-dll-10</a></td>
</tr>
<tr class="odd">
<td align="left"><a href="http://sourceforge.net/projects/mingw/files/MinGW/Base/pthreads-w32/pthreads-w32-2.9.0-pre-20110507-2/pthreads-w32-2.9.0-mingw32-pre-20110507-2-dev.tar.lzma">pthreads-w32-2.9.0-mingw32-pre-20110507-2-dev</a></td>
</tr>
<tr class="even">
<td align="left"><a href="http://sourceforge.net/projects/mingw/files/MinGW/Base/pthreads-w32/pthreads-w32-2.9.0-pre-20110507-2/libpthreadgc-2.9.0-mingw32-pre-20110507-2-dll-2.tar.lzma">libpthreadgc-2.9.0-mingw32-pre-20110507-2-dll-2</a></td>
</tr>
<tr class="odd">
<td align="left"><a href="http://sourceforge.net/projects/mingw/files/MinGW/Base/libiconv/libiconv-1.14-2/libiconv-1.14-2-mingw32-dev.tar.lzma">libiconv-1.14-2-mingw32-dev</a></td>
</tr>
<tr class="even">
<td align="left"><a href="http://sourceforge.net/projects/mingw/files/MinGW/Base/libiconv/libiconv-1.14-2/libiconv-1.14-2-mingw32-dll-2.tar.lzma">libiconv-1.14-2-mingw32-dll-2</a></td>
</tr>
<tr class="odd">
<td align="left"><a href="http://sourceforge.net/projects/mingw/files/MinGW/Base/gettext/gettext-0.18.1.1-2/libintl-0.18.1.1-2-mingw32-dll-8.tar.lzma">libintl-0.18.1.1-2-mingw32-dll-8</a></td>
</tr>
<tr class="even">
<td align="left"><a href="http://sourceforge.net/projects/mingw/files/MinGW/Base/gcc/Version4/gcc-4.7.2-1/libgomp-4.7.2-1-mingw32-dll-1.tar.lzma">libgomp-4.7.2-1-mingw32-dll-1</a></td>
</tr>
<tr class="odd">
<td align="left"><a href="http://sourceforge.net/projects/mingw/files/MinGW/Base/gcc/Version4/gcc-4.7.2-1/libssp-4.7.2-1-mingw32-dll-0.tar.lzma">libssp-4.7.2-1-mingw32-dll-0</a></td>
</tr>
<tr class="even">
<td align="left"><a href="http://sourceforge.net/projects/mingw/files/MinGW/Base/gcc/Version4/gcc-4.7.2-1/libquadmath-4.7.2-1-mingw32-dll-0.tar.lzma">libquadmath-4.7.2-1-mingw32-dll-0</a></td>
</tr>
<tr class="odd">
<td align="left"><a href="http://sourceforge.net/projects/mingw/files/MinGW/Base/gcc/Version4/gcc-4.7.2-1/gcc-core-4.7.2-1-mingw32-bin.tar.lzma">gcc-core-4.7.2-1-mingw32-bin</a></td>
</tr>
<tr class="even">
<td align="left"><a href="http://sourceforge.net/projects/mingw/files/MinGW/Base/gcc/Version4/gcc-4.7.2-1/libgcc-4.7.2-1-mingw32-dll-1.tar.lzma">libgcc-4.7.2-1-mingw32-dll-1</a></td>
</tr>
<tr class="odd">
<td align="left"><a href="http://sourceforge.net/projects/mingw/files/MinGW/Base/gcc/Version4/gcc-4.7.2-1/gcc-c%2B%2B-4.7.2-1-mingw32-bin.tar.lzma">gcc-c++-4.7.2-1-mingw32-bin</a></td>
</tr>
<tr class="even">
<td align="left"><a href="http://sourceforge.net/projects/mingw/files/MinGW/Base/gcc/Version4/gcc-4.7.2-1/libstdc%2B%2B-4.7.2-1-mingw32-dll-6.tar.lzma">libstdc++-4.7.2-1-mingw32-dll-6</a></td>
</tr>
<tr class="odd">
<td align="left"><a href="http://sourceforge.net/projects/mingw/files/MinGW/Extension/make/make-3.82-mingw32/make-3.82-5-mingw32-bin.tar.lzma">make-3.82-5-mingw32-bin</a></td>
</tr>
<tr class="even">
<td align="left"><a href="http://www.jgoettgens.de/Meine_Bilder_und_Dateien/ragel-vs2012.7z">ragel 6.8 (only for harfbuzz)</a></td>
</tr>
</tbody>
</table>
<blockquote>
<p>Don't use GCC 4.8 to build luajit. And with all due respect, don't bug me about build scripts not working if you're using a different toolchain. I don't like building things any more than anyone with a soul does.</p>
</blockquote>
<h3 id="on-linux">On Linux</h3>
<p>GCC 4.4.5 was used (stock Debian 6 gcc toolchain + nasm and ragel) with the same gcc and g++ flags.</p>
<blockquote>
<p>There's no good reason for using this particular gcc version other than the fact that in Debian, upgrading the toolchain is actually harder than it is in Windows (look at what you had to do in Windows and prove me wrong).</p>
</blockquote>
			</section>
		</div>
		<div class="container">
			<footer>
				<div id="disqus_thread"></div>
				<div class="faint">cosmin.apreutesei@gmail.com | <a href="http://unlicense.org/">public domain</a></div>
			</footer>
		</div>
	</body>
</html>

