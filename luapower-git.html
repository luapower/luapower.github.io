<!DOCTYPE html>
<html>
	<head>
		<meta charset='utf-8'>
		<title> luapower-git   - git workflow for luapower </title>
		<script src="templates/jquery.js"></script>
		<script src="templates/jquery-cookie.js"></script>
		<script src="templates/jquery-tablesorter.js"></script>
		<script src="templates/strftime.js"></script>
		<script src="templates/main.js"></script>
		<link rel="stylesheet" type="text/css" href="templates/reset.css" />
		<link rel="stylesheet" type="text/css" href="templates/hack.css" />
		<link rel="stylesheet" type="text/css" id="lights_css" />
		<script>
			var DOCNAME = 'luapower-git'
			var PROJECT = 'luapower-git'
			//set the lights before rendering starts
			set_lights()
		</script>
	</head>
	<body>
		<header>
			<div class="container">
				<div class="btn-container btn-lights-container">
					<a href="#" class="btn btn-lights" id="lights">lights</a>
				</div>
				<div class="btn-container btn-home-container">
					<a href="/" class="btn btn-home">luapower</a>
				</div>
				
				<table id="header_table">
					<tr>
						<td style="vertical-align: middle;" width="100%">
							<h1> luapower-git </h1>
							<h2> git workflow for luapower </h2>
							<span class="doc" id="package_info">&nbsp;</span>
						</td>
						<td style="vertical-align: middle;" align="right" style="height: 150px">
																						<table><tr><td>
								<a href="https://github.com/luapower/luapower-git" class="btn btn-rightside btn-github"><span class="icon"></span>View on GitHub</a>
								</td></tr><tr><td>
								<a href="https://github.com/luapower/luapower-git/tarball/master" class="btn btn-rightside">Download as .tar.gz</a>
								</td></tr><tr><td>
								<a href="https://github.com/luapower/luapower-git/zipball/master" class="btn btn-rightside">Download as .zip</a>
								</td></tr></table>
																				</td>
					</tr>
				</table>
												<div class="btn-container btn-discuss-container">
					<a href="https://github.com/luapower/luapower-git/issues/new" target="_blank" class="btn btn-rightside btn-discuss"><span class="icon"></span>Discuss</a>
				</div>
											</div>
		</header>
		<div class="container">
			<div id="toc_container" class="toc_container doc"></div>
			<section class="doc">
				<span id="module_info">&nbsp;</span>
				<h2 id="what">What?</h2>
<p>An automated way for downloading, managing and building luapower packages.</p>
<h2 id="why-not-just-use-git-directly">Why not just use git directly?</h2>
<p>Mainly because luapower packages need to be overlaid over the same directory, but you can't just git-clone multiple repos over the same directory with git (for no reason- git-clone could and should totally allow you to do that). Git <em>does</em> support overlaying multiple repos over a common directory structure but that's <a href="http://github.com/luapower/luapower-git/blob/master/clone.cmd">not trivial</a> to set up, and that is where <a href="luapower-git.html">luapower-git</a> comes in.</p>
<h2 id="how">How?</h2>
<p>First, let's git it:</p>
<pre><code>git clone ssh://git@github.com/luapower/luapower-git luapower
cd luapower</code></pre>
<p>This gets us the <code>clone</code> command (among others) which allows us to clone luapower packages easily:</p>
<pre><code>clone glue
clone mysql
...</code></pre>
<blockquote>
<p>In Linux, the command is <code>./clone.sh</code></p>
</blockquote>
<h2 id="package-management">Package management</h2>
<table>
<tbody>
<tr class="odd">
<td align="left"><code>clone --list</code></td>
<td align="left">list available (not cloned) packages</td>
</tr>
<tr class="even">
<td align="left"><code>clone &lt;package&gt;</code></td>
<td align="left">clone a package</td>
</tr>
<tr class="odd">
<td align="left"><code>clone --all</code></td>
<td align="left">clone all available packages</td>
</tr>
<tr class="even">
<td align="left"><code>remove --list</code></td>
<td align="left">list local (cloned) packages</td>
</tr>
<tr class="odd">
<td align="left"><code>remove &lt;package&gt;</code></td>
<td align="left">remove a package</td>
</tr>
</tbody>
</table>
<h2 id="the-luapower-command">The <code>luapower</code> command</h2>
<p>This is a powerful command that extracts and aggregates data from the luapower environment and gives detailed information about packages, modules and documentation. It can give accurate information about dependencies between modules and packages because it actually loads the module and tracks <code>require</code> calls, and then it integrates that information with the information about packages.</p>
<p>It is also used for keeping the package database on luapower.com up to date, along with the navigation tree and the module/package dependency lists.</p>
<p>The <code>luapower</code> command is a Lua script that depends on <a href="luajit.html">luajit</a>, <a href="lfs.html">lfs</a>, <a href="glue.html">glue</a> and <a href="tuple.html">tuple</a> so let's clone these first:</p>
<pre><code>clone luajit
clone lfs
clone glue
clone tuple</code></pre>
<p>The rest you can learn from the tool itself:</p>
<pre><code>luapower</code></pre>
<blockquote>
<p>Again, In Linux, the command is <code>./luapower.sh</code></p>
</blockquote>
<h2 id="building-all-the-c-libraries-in-one-shot">Building all the C libraries in one shot</h2>
<pre><code>build-all</code></pre>
<p>This builds all packages that have a build script in the right order.</p>
<h2 id="module-development">Module development</h2>
<blockquote>
<p>This section is only interesting if you wish to get involved in developing luapower modules.</p>
</blockquote>
<p>Git commands can be invoked from the work tree by passing <code>--git-dir=_git/&lt;package&gt;/.git</code> to git, or by setting the environment variable <code>GIT_DIR</code>. To ease the pain, the <code>proj</code> command can be used.</p>
<table>
<tbody>
<tr class="odd">
<td align="left"><code>proj</code></td>
<td align="left">list cloned repos</td>
</tr>
<tr class="even">
<td align="left"><code>proj &lt;project&gt;</code></td>
<td align="left">make git &quot;track&quot; a specific repo (i.e. set <code>GIT_DIR</code>)</td>
</tr>
<tr class="odd">
<td align="left"><code>modified</code></td>
<td align="left">show modified files across all repos</td>
</tr>
<tr class="even">
<td align="left"><code>unpushed</code></td>
<td align="left">show unpushed repos</td>
</tr>
<tr class="odd">
<td align="left"><code>untracked</code></td>
<td align="left">show untracked files (takes a while)</td>
</tr>
</tbody>
</table>
			</section>
		</div>
		<div class="container">
			<footer>
				<div id="disqus_thread"></div>
				<span class="faint">cosmin.apreutesei@gmail.com | <a href="http://unlicense.org/">public domain</a></span>
			</footer>
		</div>
	</body>
</html>
